# FaceRoster 人物インタラクションモード仕様書

## 1. 概要

FaceRosterのPeopleページにおける人物カード間のインタラクションを、シンプルな2つのモードで管理する。

**設計原則：必要十分な機能を、最小限の認知負荷で提供する**

## 2. コアコンセプト

### 2.1 2つのモードのみ

| モード | アイコン | 目的 | 使用頻度 |
|--------|----------|------|----------|
| Connect | 👥 | 関係性を作る | 高（デフォルト） |
| Merge | 🔀 | 人物を統合する | 低 |

**将来的な拡張は、この2モードが安定してから検討する**

### 2.2 デザイン原則

1. **見えない時は存在しない**: Mergeモードは必要な時だけ表示
2. **学習不要**: 触ればわかる直感的な動作
3. **一貫性**: どちらのモードも同じドラッグ&ドロップ

## 3. UI設計

### 3.1 最小限のUI

```
基本画面
┌─────────────────────────────────────────┐
│ People                      [検索] [▼]  │
│                                         │
│ [👥 Connect] [🔀 Merge]                │ ← 常に表示、Connectがデフォルト選択
│                                         │
│ [人物カードグリッド...]                  │
└─────────────────────────────────────────┘
```

### 3.2 モード表示

**Connectモード（デフォルト）**
- `[👥 Connect]` ボタンがアクティブ（色付き）
- `[🔀 Merge]` ボタンは非アクティブ（グレー）
- 特別な背景色なし

**Mergeモード**
- `[🔀 Merge]` ボタンがアクティブ（紫色）
- `[👥 Connect]` ボタンは非アクティブ（グレー）
- 画面全体に薄い紫のオーバーレイ
- モードが明確にわかる視覚的な違い

## 4. 操作フロー

### 4.1 Connectモード（変更なし）
1. 人物Aをドラッグ
2. 人物Bにドロップ
3. 関係性作成ダイアログ表示

### 4.2 Mergeモード
1. Mergeボタンをクリック（※条件付き表示）
2. 人物Aをドラッグ
3. 人物Bにドロップ  
4. 確認ダイアログ表示
5. マージ実行

## 5. 実装の簡潔性

### 5.1 状態管理（最小限）

```typescript
// 1つの状態変数のみ
const [interactionMode, setInteractionMode] = useState<'connect' | 'merge'>('connect');
```

### 5.2 条件付きMergeボタン表示

```typescript
// Mergeボタンは以下の条件で表示
const showMergeButton = 
  allUserPeople.length > 10 || // 10人以上
  hasSuggestedMerges;          // AI提案がある
```

### 5.3 視覚的フィードバック（最小限）

```css
/* Mergeモード時のみ適用 */
.merge-mode {
  --header-bg: rgba(147, 51, 234, 0.05);
  --drag-highlight: #9333ea;
}

/* 2行のCSSで完結 */
```

## 6. 実装フェーズ（シンプル化）

### Phase 1のみ実装
1. モード切り替えトグル
2. ドロップ時の処理分岐
3. 視覚的な区別（色のみ）

**Phase 2以降は保留** - ユーザーフィードバックを待つ

## 7. 技術的シンプルさ

### 7.1 既存コードへの最小限の変更

```typescript
// PeopleListItem.tsx - 1行追加
const handleDrop = (e) => {
  if (interactionMode === 'merge') {
    handleMergeDrop(e);
  } else {
    handleConnectionDrop(e); // 既存処理
  }
};
```

### 7.2 新規コンポーネントは1つだけ

```typescript
// ModeToggle.tsx - 30行以内で実装可能
const ModeToggle = ({ mode, onChange, show }) => {
  if (!show) return null;
  
  return (
    <Button
      variant={mode === 'merge' ? 'default' : 'ghost'}
      size="sm"
      onClick={() => onChange(mode === 'merge' ? 'connect' : 'merge')}
    >
      🔀
    </Button>
  );
};
```

## 8. ユーザー体験のシンプルさ

### 8.1 発見可能性
- Mergeが必要な時だけボタンが現れる
- ボタンは1つだけ（トグル式）
- 押せば何が起きるかすぐわかる

### 8.2 エラー防止
- モードが違っても基本操作は同じ（ドラッグ&ドロップ）
- 取り消し可能（確認ダイアログ）
- いつでも通常モードに戻れる

## 9. 将来への配慮（でも今は実装しない）

### もし必要になったら
- Groupモード → まずは複数選択で対応
- Tagモード → 既存の編集画面で対応
- その他 → 本当に必要か再考

## 10. 成功の測定（シンプルに）

- **実装完了まで**: 2日以内
- **ユーザーが理解するまで**: 1回の使用
- **追加サポート**: 不要

## 11. まとめ

**今すぐ実装すべきもの**
- モードトグルボタン（条件付き表示）
- 2つのドロップ処理
- 最小限の視覚的区別

**実装しないもの**
- 複雑なアニメーション
- カスタムカーソル
- 追加のモード
- 高度な視覚効果

**判断基準**
「これを追加することで、ユーザーは迷うか？」
→ Yes なら実装しない

---

*このドキュメント自体も、必要最小限の情報のみを記載*