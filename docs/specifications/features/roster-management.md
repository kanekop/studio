# 名簿管理機能仕様書

## 概要

画像をアップロードして名簿（ロスター）を作成・管理する機能です。画像内の顔を識別し、人物情報と紐付けます。

## 機能要件

### 1. 名簿の作成

#### 1.1 画像アップロード
- ドラッグ&ドロップまたはファイル選択
- 対応形式: JPEG, PNG, WebP
- 最大サイズ: 10MB
- 複数ファイルの同時アップロード対応

#### 1.2 名簿情報の設定
- 名簿名（必須）
- 説明（任意）
- タグ（任意、複数可）
- 日付（撮影日やイベント日）

### 2. 顔識別と人物紐付け

#### 2.1 顔領域の検出
- 自動顔検出（将来実装）
- 手動での顔領域選択
- 顔領域の調整機能

#### 2.2 人物の紐付け
- 既存人物から選択
- 新規人物として登録
- 未登録のまま保留

### 3. 名簿の管理

#### 3.1 一覧表示
- サムネイル表示
- リスト表示
- 作成日時/更新日時でソート

#### 3.2 編集・削除
- 名簿情報の編集
- 画像の差し替え
- 人物紐付けの変更
- 名簿の削除（確認付き）

## UI仕様

### アップロード画面
```
┌─────────────────────────────────────────────┐
│  新しい名簿を作成                           │
│                                             │
│  ┌─────────────────────────────────┐      │
│  │                                   │      │
│  │    画像をドラッグ&ドロップ        │      │
│  │          または                   │      │
│  │    [ファイルを選択]               │      │
│  │                                   │      │
│  └─────────────────────────────────┘      │
│                                             │
│  名簿名*: [                    ]            │
│  説明:    [                    ]            │
│  タグ:    [会議] [2025年] [+追加]          │
│                                             │
│              [キャンセル]  [アップロード]   │
└─────────────────────────────────────────────┘
```

### 顔識別画面
```
┌─────────────────────────────────────────────┐
│  顔を識別                                   │
│                                             │
│  [画像表示エリア]                           │
│  ・顔領域がハイライト表示                   │
│  ・クリックで人物選択ダイアログ             │
│                                             │
│  識別済み: 3人                              │
│  未識別: 2人                                │
│                                             │
│  [自動識別（AI）]  [完了]                   │
└─────────────────────────────────────────────┘
```

## パフォーマンス要件

- 画像アップロード時のプログレス表示
- 大きな画像の自動リサイズ（クライアント側）
- 顔領域の切り出し画像は別途保存

## セキュリティ要件

- アップロード画像のウイルススキャン（将来実装）
- 不適切なコンテンツの検出（将来実装）
- ユーザーごとのストレージ容量制限 